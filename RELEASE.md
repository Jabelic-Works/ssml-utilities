# リリースプロセス

## 前提条件

- GitHub リポジトリへの書き込み権限
- GitHub Actions の実行権限
- pnpm がローカル環境にインストールされていること

## リリース手順

1. プルリクエスト（PR）のレビューとマージ

   a. 対象の PR をレビューします。
   b. 問題がなければ、PR を main ブランチにマージします。

2. リリースワークフローの実行

   a. GitHub リポジトリのページで、"Actions"タブに移動します。
   b. 左側のサイドバーから"Release"ワークフローを選択します。
   c. 右上の"Run workflow"ボタンをクリックします。
   d. ドロップダウンメニューが表示されるので、以下の情報を入力します：

   - Packages to update: 更新するパッケージ名をカンマ区切りで入力します（例：`core,highlighter,editor-react`）
   - Type of change: 変更の種類を選択します（patch、minor、major）
   - Change description: 変更内容の簡単な説明を入力します

   e. 入力が完了したら、"Run workflow"ボタンをクリックしてワークフローを開始します。

3. リリースプロセスの監視

   a. ワークフローの実行状況を"Actions"タブで確認します。
   b. ワークフローが正常に完了するまで待機します。

4. リリース後の確認

   a. npm で公開されたパッケージのバージョンを確認します：

   ```
   pnpm view @ssml-utilities/package-name version
   ```

   b. GitHub のリリースページで、新しいリリースが作成されていることを確認します。
   c. 生成された CHANGELOG.md ファイルを確認し、変更内容が正しく記録されていることを確認します。

5. ローカル環境の更新

   a. master ブランチの最新の変更を取り込みます：

   ```
   git checkout master
   git pull origin master
   ```

   b. 依存関係を更新します：

   ```
   pnpm install
   ```

## トラブルシューティング

- ワークフローが失敗した場合は、Actions タブでエラーログを確認し、必要に応じて修正を行います。
- パッケージの公開に問題がある場合は、NPM_TOKEN が正しく設定されていることを確認してください。
- pnpm に関連する問題が発生した場合は、pnpm のバージョンが最新であることを確認してください。

## 注意事項

- リリースプロセスを開始する前に、すべての自動テストがパスしていることを確認してください。
- メジャーバージョンの更新（破壊的変更を含む）を行う場合は、事前にチームで十分に議論し、影響範囲を確認してください。
- リリース後は、ドキュメントや関連するサンプルコードが最新の状態に更新されていることを確認してください。
- モノレポ構造を使用している場合、パッケージ間の依存関係が正しく更新されていることを確認してください。

このリリースプロセスに関して質問や改善提案がある場合は、チームのリードまたはプロジェクト管理者に連絡してください。
